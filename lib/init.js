"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = init;
var _constants = require("./constants");
/* eslint-env browser */
/* global Ya */

function init(accounts) {
  var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};
  var version = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : '1';
  var callbackQueue = (0, _constants.callbackQueueName)(version);
  window[_constants.accountListName] = window[_constants.accountListName] || [];
  window[_constants.accountListName] = window[_constants.accountListName].concat(accounts);
  window[callbackQueue] = window[callbackQueue] || [];
  window[callbackQueue].push(function () {
    accounts.forEach(function (id) {
      var defaultOptions = {
        id: id
      };
      try {
        window[(0, _constants.trackerInstanceName)(id)] = new Ya[(0, _constants.trackerConstructorName)(version)](Object.assign(defaultOptions, options));
      } catch (ex) {
        console.warn(ex);
      }
    });
  });
  accounts.forEach(function (id) {
    window[(0, _constants.trackerVersionName)(id)] = version;
  });
}
;

//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaW5pdC5qcyIsIm5hbWVzIjpbImluaXQiLCJhY2NvdW50cyIsIm9wdGlvbnMiLCJ2ZXJzaW9uIiwiY2FsbGJhY2tRdWV1ZSIsImNhbGxiYWNrUXVldWVOYW1lIiwid2luZG93IiwiYWNjb3VudExpc3ROYW1lIiwiY29uY2F0IiwicHVzaCIsImZvckVhY2giLCJpZCIsImRlZmF1bHRPcHRpb25zIiwidHJhY2tlckluc3RhbmNlTmFtZSIsIllhIiwidHJhY2tlckNvbnN0cnVjdG9yTmFtZSIsIk9iamVjdCIsImFzc2lnbiIsImV4IiwiY29uc29sZSIsIndhcm4iLCJ0cmFja2VyVmVyc2lvbk5hbWUiXSwic291cmNlcyI6WyIuLi9zcmMvaW5pdC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKiBlc2xpbnQtZW52IGJyb3dzZXIgKi9cbi8qIGdsb2JhbCBZYSAqL1xuXG5pbXBvcnQge1xuICAgIGFjY291bnRMaXN0TmFtZSxcbiAgICBjYWxsYmFja1F1ZXVlTmFtZSxcbiAgICB0cmFja2VyQ29uc3RydWN0b3JOYW1lLFxuICAgIHRyYWNrZXJJbnN0YW5jZU5hbWUsXG4gICAgdHJhY2tlclZlcnNpb25OYW1lXG59IGZyb20gJy4vY29uc3RhbnRzJztcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gaW5pdChhY2NvdW50cywgb3B0aW9ucyA9IHt9LCB2ZXJzaW9uID0gJzEnKSB7XG4gICAgbGV0IGNhbGxiYWNrUXVldWUgPSBjYWxsYmFja1F1ZXVlTmFtZSh2ZXJzaW9uKTtcbiAgICB3aW5kb3dbYWNjb3VudExpc3ROYW1lXSA9IHdpbmRvd1thY2NvdW50TGlzdE5hbWVdIHx8IFtdO1xuICAgIHdpbmRvd1thY2NvdW50TGlzdE5hbWVdID0gd2luZG93W2FjY291bnRMaXN0TmFtZV0uY29uY2F0KGFjY291bnRzKTtcbiAgICB3aW5kb3dbY2FsbGJhY2tRdWV1ZV0gPSB3aW5kb3dbY2FsbGJhY2tRdWV1ZV0gfHwgW107XG4gICAgd2luZG93W2NhbGxiYWNrUXVldWVdLnB1c2goKCkgPT4ge1xuICAgICAgICBhY2NvdW50cy5mb3JFYWNoKGlkID0+IHtcbiAgICAgICAgICAgIGxldCBkZWZhdWx0T3B0aW9ucyA9IHtpZH07XG5cbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgd2luZG93W3RyYWNrZXJJbnN0YW5jZU5hbWUoaWQpXSA9IG5ldyBZYVt0cmFja2VyQ29uc3RydWN0b3JOYW1lKHZlcnNpb24pXShcbiAgICAgICAgICAgICAgICAgICAgT2JqZWN0LmFzc2lnbihkZWZhdWx0T3B0aW9ucywgb3B0aW9ucylcbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgfSBjYXRjaCAoZXgpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oZXgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9KTtcbiAgICBhY2NvdW50cy5mb3JFYWNoKGlkID0+IHtcbiAgICAgICAgd2luZG93W3RyYWNrZXJWZXJzaW9uTmFtZShpZCldID0gdmVyc2lvbjtcbiAgICB9KTtcbn07XG4iXSwibWFwcGluZ3MiOiI7Ozs7OztBQUdBO0FBSEE7QUFDQTs7QUFVZSxTQUFTQSxJQUFJLENBQUNDLFFBQVEsRUFBK0I7RUFBQSxJQUE3QkMsT0FBTyx1RUFBRyxDQUFDLENBQUM7RUFBQSxJQUFFQyxPQUFPLHVFQUFHLEdBQUc7RUFDOUQsSUFBSUMsYUFBYSxHQUFHLElBQUFDLDRCQUFpQixFQUFDRixPQUFPLENBQUM7RUFDOUNHLE1BQU0sQ0FBQ0MsMEJBQWUsQ0FBQyxHQUFHRCxNQUFNLENBQUNDLDBCQUFlLENBQUMsSUFBSSxFQUFFO0VBQ3ZERCxNQUFNLENBQUNDLDBCQUFlLENBQUMsR0FBR0QsTUFBTSxDQUFDQywwQkFBZSxDQUFDLENBQUNDLE1BQU0sQ0FBQ1AsUUFBUSxDQUFDO0VBQ2xFSyxNQUFNLENBQUNGLGFBQWEsQ0FBQyxHQUFHRSxNQUFNLENBQUNGLGFBQWEsQ0FBQyxJQUFJLEVBQUU7RUFDbkRFLE1BQU0sQ0FBQ0YsYUFBYSxDQUFDLENBQUNLLElBQUksQ0FBQyxZQUFNO0lBQzdCUixRQUFRLENBQUNTLE9BQU8sQ0FBQyxVQUFBQyxFQUFFLEVBQUk7TUFDbkIsSUFBSUMsY0FBYyxHQUFHO1FBQUNELEVBQUUsRUFBRkE7TUFBRSxDQUFDO01BRXpCLElBQUk7UUFDQUwsTUFBTSxDQUFDLElBQUFPLDhCQUFtQixFQUFDRixFQUFFLENBQUMsQ0FBQyxHQUFHLElBQUlHLEVBQUUsQ0FBQyxJQUFBQyxpQ0FBc0IsRUFBQ1osT0FBTyxDQUFDLENBQUMsQ0FDckVhLE1BQU0sQ0FBQ0MsTUFBTSxDQUFDTCxjQUFjLEVBQUVWLE9BQU8sQ0FBQyxDQUN6QztNQUNMLENBQUMsQ0FBQyxPQUFPZ0IsRUFBRSxFQUFFO1FBQ1RDLE9BQU8sQ0FBQ0MsSUFBSSxDQUFDRixFQUFFLENBQUM7TUFDcEI7SUFDSixDQUFDLENBQUM7RUFDTixDQUFDLENBQUM7RUFDRmpCLFFBQVEsQ0FBQ1MsT0FBTyxDQUFDLFVBQUFDLEVBQUUsRUFBSTtJQUNuQkwsTUFBTSxDQUFDLElBQUFlLDZCQUFrQixFQUFDVixFQUFFLENBQUMsQ0FBQyxHQUFHUixPQUFPO0VBQzVDLENBQUMsQ0FBQztBQUNOO0FBQUMifQ==