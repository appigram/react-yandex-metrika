"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = init;
var _constants = require("./constants");
/* eslint-env browser */
/* global Ya */

function init(accounts) {
  var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};
  var version = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : '1';
  var callbackQueue = (0, _constants.callbackQueueName)(version);
  window[_constants.accountListName] = window[_constants.accountListName] || [];
  window[_constants.accountListName] = window[_constants.accountListName].concat(accounts);
  window[callbackQueue] = window[callbackQueue] || [];
  window[callbackQueue].push(function () {
    accounts.forEach(function (id) {
      var defaultOptions = {
        id: id
      };
      try {
        window[(0, _constants.trackerInstanceName)(id)] = new Ya[(0, _constants.trackerConstructorName)(version)](Object.assign(defaultOptions, options));
      } catch (ex) {
        console.warn(ex);
      }
    });
  });
  accounts.forEach(function (id) {
    window[(0, _constants.trackerVersionName)(id)] = version;
  });
}
;

//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaW5pdC5qcyIsIm5hbWVzIjpbIl9jb25zdGFudHMiLCJyZXF1aXJlIiwiaW5pdCIsImFjY291bnRzIiwib3B0aW9ucyIsImFyZ3VtZW50cyIsImxlbmd0aCIsInVuZGVmaW5lZCIsInZlcnNpb24iLCJjYWxsYmFja1F1ZXVlIiwiY2FsbGJhY2tRdWV1ZU5hbWUiLCJ3aW5kb3ciLCJhY2NvdW50TGlzdE5hbWUiLCJjb25jYXQiLCJwdXNoIiwiZm9yRWFjaCIsImlkIiwiZGVmYXVsdE9wdGlvbnMiLCJ0cmFja2VySW5zdGFuY2VOYW1lIiwiWWEiLCJ0cmFja2VyQ29uc3RydWN0b3JOYW1lIiwiT2JqZWN0IiwiYXNzaWduIiwiZXgiLCJjb25zb2xlIiwid2FybiIsInRyYWNrZXJWZXJzaW9uTmFtZSJdLCJzb3VyY2VzIjpbIi4uL3NyYy9pbml0LmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qIGVzbGludC1lbnYgYnJvd3NlciAqL1xuLyogZ2xvYmFsIFlhICovXG5cbmltcG9ydCB7XG4gICAgYWNjb3VudExpc3ROYW1lLFxuICAgIGNhbGxiYWNrUXVldWVOYW1lLFxuICAgIHRyYWNrZXJDb25zdHJ1Y3Rvck5hbWUsXG4gICAgdHJhY2tlckluc3RhbmNlTmFtZSxcbiAgICB0cmFja2VyVmVyc2lvbk5hbWVcbn0gZnJvbSAnLi9jb25zdGFudHMnO1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBpbml0KGFjY291bnRzLCBvcHRpb25zID0ge30sIHZlcnNpb24gPSAnMScpIHtcbiAgICBsZXQgY2FsbGJhY2tRdWV1ZSA9IGNhbGxiYWNrUXVldWVOYW1lKHZlcnNpb24pO1xuICAgIHdpbmRvd1thY2NvdW50TGlzdE5hbWVdID0gd2luZG93W2FjY291bnRMaXN0TmFtZV0gfHwgW107XG4gICAgd2luZG93W2FjY291bnRMaXN0TmFtZV0gPSB3aW5kb3dbYWNjb3VudExpc3ROYW1lXS5jb25jYXQoYWNjb3VudHMpO1xuICAgIHdpbmRvd1tjYWxsYmFja1F1ZXVlXSA9IHdpbmRvd1tjYWxsYmFja1F1ZXVlXSB8fCBbXTtcbiAgICB3aW5kb3dbY2FsbGJhY2tRdWV1ZV0ucHVzaCgoKSA9PiB7XG4gICAgICAgIGFjY291bnRzLmZvckVhY2goaWQgPT4ge1xuICAgICAgICAgICAgbGV0IGRlZmF1bHRPcHRpb25zID0ge2lkfTtcblxuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICB3aW5kb3dbdHJhY2tlckluc3RhbmNlTmFtZShpZCldID0gbmV3IFlhW3RyYWNrZXJDb25zdHJ1Y3Rvck5hbWUodmVyc2lvbildKFxuICAgICAgICAgICAgICAgICAgICBPYmplY3QuYXNzaWduKGRlZmF1bHRPcHRpb25zLCBvcHRpb25zKVxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICB9IGNhdGNoIChleCkge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUud2FybihleCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH0pO1xuICAgIGFjY291bnRzLmZvckVhY2goaWQgPT4ge1xuICAgICAgICB3aW5kb3dbdHJhY2tlclZlcnNpb25OYW1lKGlkKV0gPSB2ZXJzaW9uO1xuICAgIH0pO1xufTtcbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBR0EsSUFBQUEsVUFBQSxHQUFBQyxPQUFBO0FBSEE7QUFDQTs7QUFVZSxTQUFTQyxJQUFJQSxDQUFDQyxRQUFRLEVBQStCO0VBQUEsSUFBN0JDLE9BQU8sR0FBQUMsU0FBQSxDQUFBQyxNQUFBLFFBQUFELFNBQUEsUUFBQUUsU0FBQSxHQUFBRixTQUFBLE1BQUcsQ0FBQyxDQUFDO0VBQUEsSUFBRUcsT0FBTyxHQUFBSCxTQUFBLENBQUFDLE1BQUEsUUFBQUQsU0FBQSxRQUFBRSxTQUFBLEdBQUFGLFNBQUEsTUFBRyxHQUFHO0VBQzlELElBQUlJLGFBQWEsR0FBRyxJQUFBQyw0QkFBaUIsRUFBQ0YsT0FBTyxDQUFDO0VBQzlDRyxNQUFNLENBQUNDLDBCQUFlLENBQUMsR0FBR0QsTUFBTSxDQUFDQywwQkFBZSxDQUFDLElBQUksRUFBRTtFQUN2REQsTUFBTSxDQUFDQywwQkFBZSxDQUFDLEdBQUdELE1BQU0sQ0FBQ0MsMEJBQWUsQ0FBQyxDQUFDQyxNQUFNLENBQUNWLFFBQVEsQ0FBQztFQUNsRVEsTUFBTSxDQUFDRixhQUFhLENBQUMsR0FBR0UsTUFBTSxDQUFDRixhQUFhLENBQUMsSUFBSSxFQUFFO0VBQ25ERSxNQUFNLENBQUNGLGFBQWEsQ0FBQyxDQUFDSyxJQUFJLENBQUMsWUFBTTtJQUM3QlgsUUFBUSxDQUFDWSxPQUFPLENBQUMsVUFBQUMsRUFBRSxFQUFJO01BQ25CLElBQUlDLGNBQWMsR0FBRztRQUFDRCxFQUFFLEVBQUZBO01BQUUsQ0FBQztNQUV6QixJQUFJO1FBQ0FMLE1BQU0sQ0FBQyxJQUFBTyw4QkFBbUIsRUFBQ0YsRUFBRSxDQUFDLENBQUMsR0FBRyxJQUFJRyxFQUFFLENBQUMsSUFBQUMsaUNBQXNCLEVBQUNaLE9BQU8sQ0FBQyxDQUFDLENBQ3JFYSxNQUFNLENBQUNDLE1BQU0sQ0FBQ0wsY0FBYyxFQUFFYixPQUFPLENBQ3pDLENBQUM7TUFDTCxDQUFDLENBQUMsT0FBT21CLEVBQUUsRUFBRTtRQUNUQyxPQUFPLENBQUNDLElBQUksQ0FBQ0YsRUFBRSxDQUFDO01BQ3BCO0lBQ0osQ0FBQyxDQUFDO0VBQ04sQ0FBQyxDQUFDO0VBQ0ZwQixRQUFRLENBQUNZLE9BQU8sQ0FBQyxVQUFBQyxFQUFFLEVBQUk7SUFDbkJMLE1BQU0sQ0FBQyxJQUFBZSw2QkFBa0IsRUFBQ1YsRUFBRSxDQUFDLENBQUMsR0FBR1IsT0FBTztFQUM1QyxDQUFDLENBQUM7QUFDTjtBQUFDIn0=